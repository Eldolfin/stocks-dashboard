help:
    just --list

# Restart frontend & backend with a clean DB
prepare:
    docker compose -f ../dev/docker-compose.yml -f ../dev/docker-compose.dev.yml -f docker-compose.yml down
    docker volume rm wsb-test-backend-db || true
    docker volume create wsb-test-backend-db
    docker compose -f ../dev/docker-compose.yml -f ../dev/docker-compose.dev.yml -f docker-compose.yml up -d --build --wait

# Restarts frontend & backend with a clean DB then runs tests
run:
    npx playwright test --reporter=line

# Same as `test` but with the --ui argument passed to playwright for debugging
run-ui:
    npx playwright test --ui

# Generate expected screenshots
update-snapshots:
    npx playwright test --update-snapshots

# Ran by github actions
ci: prepare run
